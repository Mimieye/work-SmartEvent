!function(){"use strict";var t,e,o,a,n=140,i=34,c=!1,r=88,s=!1,h=15,l=100,u=h*l,f=15,m=function(){return 0===u?(clearTimeout(a),clearTimeout(e),$(".ballSection").empty(),c=!0,u=h*l,$(".outcome").html((.017*f).toFixed(2)),$(".time").html(f),$(".outcomeBox").show(),$(".formSection .form").hide().eq(Math.floor(3*Math.random())).show(),$(".gameBox").hide(),$(".touchSection").hide(),60>f&&$("#fbShare").attr("href","outcome/outcomefbShare_1.html"),f>=60&&120>f&&$("#fbShare").attr("href","outcome/outcomefbShare_2.html"),f>=120&&$("#fbShare").attr("href","outcome/outcomefbShare_3.html"),!1):(u-=1,1e3>u?$(".timer span").html("0"+Math.floor(u/l)):$(".timer span").html(Math.floor(u/l)),void(a=setTimeout(m,1e3/l)))},d=function(t,e,a){var n=t,i=e,c=a;return-18>r?(clearTimeout(o),r=88,s=!1,$(".hit").attr("style",""),!1):($("#swing").trigger("play"),t.css({transform:"rotate("+r*a+"deg)",MozTransform:"rotate("+r*a+"deg)",WebkitTransform:"rotate("+r*a+"deg)",msTransform:"rotate("+r*a+"deg)"}),r-=1060/i,void(o=setTimeout(function(){d(n,i,c)},10)))},p=function(){var t=Math.random()<.5?-1:1,o=400+1200*Math.floor(3*Math.random())+Math.floor(250*(3*Math.random()-1));$(".ballSection").append("<div class='ball'></div>"),clearTimeout(e),b($(".ballSection").find(".ball"),n,o,t)},b=function(o,a,r,s){var h=o,l=r,u=s;return Math.abs(a-n)>80&&o.stop(!0,!1).fadeOut(100,function(){return $(this).remove(),c?($(".ballSection").empty(),!1):void p()}),Math.abs(a-n)>90?(clearTimeout(e),!1):(o.css({left:a,top:u*(77/39)*(a-n)+i,width:Math.abs(a-n)/78*20+20,height:Math.abs(a-n)/78*20+20,marginTop:Math.abs(a-n)/78*-10-10,marginLeft:Math.abs(a-n)/78*-10-10}),t=a+900/r*u,void(e=setTimeout(function(){b(h,t,l,u)},10)))},g=function(t){clearTimeout(e),$("#hit").trigger("play"),$("#cheer").trigger("play"),$(".ball").stop(!0,!1).animate({left:t+Math.floor(200*Math.random())-100,top:0,width:10,height:10},{duration:500,step:function(){$(".ball").css("overflow","visible")},complete:function(){$(".ballSection").empty(),p()}})};$(".hit").click(function(){if(s)return!1;s=!0;var t=parseInt($(".ball").css("top"),10)-41,o=parseInt($(".ball").css("left"),10)-41,n=parseInt($(".hitLeft").css("left"),10),i=parseInt($(".hitRight").css("left"),10),c=(parseInt($(".hitLeft").css("top"),10),parseInt($(".hitRight").css("top"),10));switch($(this).attr("class").substr(7)){case"Left":$(".hitLeft").css("opacity","1"),d($(".batLeft"),121,1),Math.abs(t-(c-20))<30&&Math.abs(o-n)<30&&(clearTimeout(a),clearTimeout(e),$(".plus").show().animate({top:110},500,function(){$(this).hide(),$(this).css("top",128)}),u+=200,m(),$(".ball").addClass("homerun"),f+=2,setTimeout(function(){$(".ball").removeClass("homerun")},100),g($(".ball"),o));break;case"Right":$(".hitRight").css("opacity","1"),d($(".batRight"),121,-1),Math.abs(t-(c-20))<30&&Math.abs(o-i)<30&&(clearTimeout(a),clearTimeout(e),$(".plus").show().animate({top:110},500,function(){$(this).hide(),$(this).css({top:128})}),u+=200,m(),$(".ball").addClass("homerun"),f+=2,setTimeout(function(){$(".ball").removeClass("homerun")},100),g($(".ball"),o))}});var w=function(){$(".step, .gameMask").hide(),$(".game").show(),$(".touchSection").show(),f=30,c=!1,$(".ballSection").append("<div class='ball'></div>"),b($(".ballSection").find(".ball").last(),n,900,1),m()};$(".enter").on("click",function(){$(".step").hide(),$(".gameInfo").show(),$("#swing").load(),$("#hit").load(),$("#cheer").load(),$("#swing")[0].currentTime=0,$("#hit")[0].currentTime=0,$("#cheer")[0].currentTime=0}),$(".play").on("click",function(){var t="",e="",o="";(isNaN($("#age").val())||isNaN($("#height").val())||isNaN($("#weight").val()))&&(isNaN($("#age").val())&&(t="請填寫年齡"),isNaN($("#height").val())&&(e="請填寫身高"),isNaN($("#weight").val())&&(o="請填寫體重"),window.alert(t+"\n"+e+"\n"+o)),isNaN($("#age").val())||isNaN($("#height").val())||isNaN($("#weight").val())||($(".step").hide(),$(".countDown").show(),$(".countDown p").eq(0).fadeIn(500,function(){$(".countDown p").eq(0).fadeOut(500,function(){$(".countDown p").eq(1).fadeIn(500,function(){$(".countDown p").eq(1).fadeOut(500,function(){$(".countDown p").eq(2).fadeIn(500,function(){$(".countDown p").eq(2).fadeOut(500,function(){w()})})})})})}))}),$(".again").on("click",function(){$(".outcomeBox").hide(),$(".gameBox").show(),$("#swing")[0].currentTime=0,$("#hit")[0].currentTime=0,$("#cheer")[0].currentTime=0,$(".step").hide(),$(".countDown, .gameMask").show(),$(".countDown p").eq(0).fadeIn(500,function(){$(".countDown p").eq(0).fadeOut(500,function(){$(".countDown p").eq(1).fadeIn(500,function(){$(".countDown p").eq(1).fadeOut(500,function(){$(".countDown p").eq(2).fadeIn(500,function(){$(".countDown p").eq(2).fadeOut(500,function(){w()})})})})})})}),$("#swing").load(),$("#hit").load(),$("#cheer").load(),$("#swing")[0].currentTime=0,$("#hit")[0].currentTime=0,$("#cheer")[0].currentTime=0}();