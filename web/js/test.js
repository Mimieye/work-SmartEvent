!function(){"use strict";var t,e,o,a,n=335,i=66,s=!1,c=88,l=!1,r=15,h=100,u=r*h,f=15,m=function(){return 0===u?(clearTimeout(a),clearTimeout(e),$(".ballSection").empty(),s=!0,u=r*h,$(window).off("keydown",function(t){g(t)}),$(".outcome").html((.017*f).toFixed(2)),$(".time").html(f),$(".outcomeBox").show(),$(".formSection .form").hide().eq(Math.floor(3*Math.random())).show(),$(".gameBox").hide(),60>f&&$("#fbShare").attr("href","outcome/outcomefbShare_1.html"),f>=60&&120>f&&$("#fbShare").attr("href","outcome/outcomefbShare_2.html"),f>=120&&$("#fbShare").attr("href","outcome/outcomefbShare_3.html"),!1):(u-=1,1e3>u?$(".timer span").html("0"+Math.floor(u/h)):$(".timer span").html(Math.floor(u/h)),void(a=setTimeout(m,1e3/h)))},p=function(t,e,a){var n=t,i=e,s=a;return-18>c?(clearTimeout(o),c=88,l=!1,!1):($("#swing").trigger("play"),t.css({transform:"rotate("+c*a+"deg)",MozTransform:"rotate("+c*a+"deg)",WebkitTransform:"rotate("+c*a+"deg)",msTransform:"rotate("+c*a+"deg)"}),c-=1060/i,void(o=setTimeout(function(){p(n,i,s)},10)))},d=function(t){clearTimeout(e),$("#hit").trigger("play"),$("#cheer").trigger("play"),$(".ball").stop(!0,!1).animate({left:t+Math.floor(200*Math.random())-100,top:0,width:10,height:10},{duration:500,step:function(){$(".ball").css("overflow","visible")},complete:function(){$(".ballSection").empty(),b()}})},b=function(){var t=Math.random()<.5?-1:1,o=400+1200*Math.floor(3*Math.random())+Math.floor(250*(3*Math.random()-1));$(".ballSection").append("<div class='ball'><img src='images/pic_baseball.png'></div>"),clearTimeout(e),w($(".ballSection").find(".ball"),n,o,t)},w=function(o,a,c,l){var r=o,h=c,u=l;return Math.abs(a-n)>170&&o.stop(!0,!1).fadeOut(100,function(){return $(this).remove(),s?($(".ballSection").empty(),!1):void b()}),Math.abs(a-n)>210?(clearTimeout(e),!1):(o.css({left:a,top:1.525*u*(a-n)+i,width:Math.abs(a-n)/160*41+40,height:Math.abs(a-n)/160*41+40,marginTop:Math.abs(a-n)/320*-41-20,marginLeft:Math.abs(a-n)/320*-41-20}),t=a+1650/c*u,void(e=setTimeout(function(){w(r,t,h,u)},10)))},g=function(t){var o=parseInt($(".ball").css("top"),10)-41,n=parseInt($(".ball").css("left"),10)-41,i=parseInt($(".hitLeft").css("left"),10),s=parseInt($(".hitRight").css("left"),10),c=parseInt($(".hitLeft").css("top"),10),r=parseInt($(".hitRight").css("top"),10);switch(t.which){case 37:if(l)return!1;l=!0,p($(".batLeft"),300,1),$(".hitLeft").css("opacity","1"),Math.abs(o-c)<30&&Math.abs(n-i)<30&&(clearTimeout(a),clearTimeout(e),$(".plus").stop(!0,!1).show().animate({top:200},500,function(){$(this).hide(),$(this).css("top",216)}),u+=200,m(),$(".ball").addClass("homerun"),f+=2,setTimeout(function(){$(".ball").removeClass("homerun")},50),d($(".ball"),n));break;case 39:if(l)return!1;l=!0,p($(".batRight"),300,-1),$(".hitRight").css("opacity","1"),Math.abs(o-r)<30&&Math.abs(n-s)<30&&(clearTimeout(a),clearTimeout(e),$(".plus").stop(!0,!1).show().animate({top:200},500,function(){$(this).hide(),$(this).css({top:216})}),u+=200,m(),$(".ball").addClass("homerun"),f+=2,setTimeout(function(){$(".ball").removeClass("homerun")},50),d($(".ball"),n))}},v=function(){$(".step, .gameMask").hide(),$(".game").show(),f=30,s=!1,$(".ballSection").append("<div class='ball'><img src='images/pic_baseball.png'></div>"),w($(".ballSection").find(".ball").last(),n,900,1),m(),$(window).on("keydown",function(t){g(t)}),$(window).on("keyup",function(){$(".hit").attr("style","")})};$(".enter").on("click",function(){$(".step").hide(),$(".gameInfo").show()}),$(".play").on("click",function(){var t="",e="",o="";(isNaN($("#age").val())||isNaN($("#height").val())||isNaN($("#weight").val()))&&(isNaN($("#age").val())&&(t="請填寫年齡"),isNaN($("#height").val())&&(e="請填寫身高"),isNaN($("#weight").val())&&(o="請填寫體重"),window.alert(t+"\n"+e+"\n"+o)),isNaN($("#age").val())||isNaN($("#height").val())||isNaN($("#weight").val())||($(".step").hide(),$(".countDown").show(),$(".countDown p").eq(0).fadeIn(500,function(){$(".countDown p").eq(0).fadeOut(500,function(){$(".countDown p").eq(1).fadeIn(500,function(){$(".countDown p").eq(1).fadeOut(500,function(){$(".countDown p").eq(2).fadeIn(500,function(){$(".countDown p").eq(2).fadeOut(500,function(){v()})})})})})}))}),$(".again").on("click",function(){$(".outcomeBox").hide(),$(".gameBox").show(),$(".step").hide(),$(".countDown, .gameMask").show(),$(".countDown p").eq(0).fadeIn(500,function(){$(".countDown p").eq(0).fadeOut(500,function(){$(".countDown p").eq(1).fadeIn(500,function(){$(".countDown p").eq(1).fadeOut(500,function(){$(".countDown p").eq(2).fadeIn(500,function(){$(".countDown p").eq(2).fadeOut(500,function(){v()})})})})})})}),$(window).on("keydown",function(t){if(13===t.which){if(!$(".gameInfo").is(":visible"))return!1;$(".play").click()}})}();